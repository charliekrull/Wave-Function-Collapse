--[[
    Some Helper functions
]]

function table.slice(tbl, first, last, step)
    local sliced = {}
    for i = first or 1, last or #tbl, step or 1 do
        sliced[#sliced + 1] = tbl[i]
    end

    return sliced
end

function table.randomChoice(tbl) --returns single random element in tbl
    if #tbl > 0 then
        local choice = tbl[math.random(#tbl)]
        return choice

    else
        return nil
    end


        
    
end

--check if a table contains a certain element

function table.contains(tbl, element)
    for k, content in pairs(tbl) do
        if content == element then
            return true
        end
    end

    return false
end

--gets individual images from a spritesheet/tilesheet
function GenerateQuads(atlas, tilewidth, tileheight)
    local sheetWidth = atlas:getWidth() / tilewidth
    local sheetHeight = atlas:getHeight() / tileheight

    local sheetCounter = 1
    local spritesheet = {}

    for y = 0, sheetHeight - 1 do
        for x = 0, sheetWidth - 1 do
            spritesheet[sheetCounter] = love.graphics.newQuad(x * tilewidth, y * tileheight,
            tilewidth, tileheight, atlas:getDimensions())

            sheetCounter = sheetCounter + 1
        end
    end

    return spritesheet
end

--[[
    Recursive table printing function.
    https://coronalabs.com/blog/2014/09/02/tutorial-printing-table-contents/
]]
function print_r ( t )
    local print_r_cache={}
    local function sub_print_r(t,indent)
        if (print_r_cache[tostring(t)]) then
            print(indent.."*"..tostring(t))
        else
            print_r_cache[tostring(t)]=true
            if (type(t)=="table") then
                for pos,val in pairs(t) do
                    if (type(val)=="table") then
                        print(indent.."["..pos.."] => "..tostring(t).." {")
                        sub_print_r(val,indent..string.rep(" ",string.len(pos)+8))
                        print(indent..string.rep(" ",string.len(pos)+6).."}")
                    elseif (type(val)=="string") then
                        print(indent.."["..pos..'] => "'..val..'"')
                    else
                        print(indent.."["..pos.."] => "..tostring(val))
                    end
                end
            else
                print(indent..tostring(t))
            end
        end
    end
    if (type(t)=="table") then
        print(tostring(t).." {")
        sub_print_r(t,"  ")
        print("}")
    else
        sub_print_r(t,"  ")
    end
    print()
end

function map(inputStart, inputEnd, outputStart, outPutEnd, value)
    return outputStart + ((outPutEnd-outputStart)/(inputEnd-inputStart)) * (value - inputStart)   

end

function table.find(tbl, element)
    --[[
        Returns the index of element in tbl, nil if not found
    ]]
    for k, val in pairs(tbl) do
        if val == element then
            return k
        end
    end
    return nil
end

function shuffle(tbl)
    for i = #tbl, 2, -1 do
        local rand = math.random(i)
        tbl[i], tbl[rand] = tbl[rand], tbl[i]
    end

    return tbl
end

function tablesMatch(a, b) -- rely on the fact that numbers can be coerced to strings a bit here, this won't work for tables that contain tables
    return table.concat(a) == table.concat(b)
end